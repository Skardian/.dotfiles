# Includes configs included in .bashrc and .zshrc
# Set 256 colors
[[ $TMUX = "" ]] && export TERM="xterm-256color"

# LESS options
# Source: https://github.com/janmoesen/tilde
less_options=(
    # If the entire text fits on one screen, just show it and quit. (Be more
    # like "cat" and less like "more".)
    --quit-if-one-screen

    # Do not clear the screen first.
    --no-init

    # Like "smartcase" in Vim: ignore case unless the search pattern is mixed.
    --ignore-case

    # Do not automatically wrap long lines.
    --chop-long-lines

    # Allow ANSI colour escapes, but no other escapes.
    --RAW-CONTROL-CHARS

    # Do not ring the bell when trying to scroll past the end of the buffer.
    --quiet

    # Do not complain when we are on a dumb terminal.
    --dumb
);
export LESS="${less_options[*]}";
unset less_options;

# Man colors
#
export LESS_TERMCAP_md=$'\E[1;34;74m'  # light blue
export LESS_TERMCAP_us=$'\E[1;32;146m' # light green

# Don't change anything here
export LESS_TERMCAP_mb=$'\E[1;31m'     # begin blinking
export LESS_TERMCAP_me=$'\E[0m'        # end mode
export LESS_TERMCAP_se=$'\E[0m'        # end standout-mode
export LESS_TERMCAP_so=$'\E[38;5;246m' # begin standout-mode - info box
export LESS_TERMCAP_ue=$'\E[0m'        # end underline]']']']']']']'
export PAGER='less';

# The home directories are accesible
export CDPATH="$HOME"

# Add safe folder inside .git on trusted repos
export PATH=".git/safe/../../local_bin:.git/safe/../../bin:$PATH"

# Local bin
export PATH="$HOME/bin:$PATH"

# .dotfiles bin
export PATH="$HOME/.dotfiles/bin:$PATH"

# RVM
export PATH="$PATH:$HOME/.rvm/bin" # Add RVM to PATH for scripting
[ -s "$HOME/.rvm/scripts/rvm" ] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*

# g acts as 'git status' or as git
# Source: https://github.com/thoughtbot/dotfiles
g() {
    if [[ $# > 0 ]]; then
        git $@
    else
        git status --short --branch # Needs whitespace or comment at the end (Strange behaviour)
    fi
}

# Function to convert from seconds to hh:mm:ss
convertsecs() {
    (( h=${1}/3600 ))
    (( m=(${1}%3600)/60 ))
    (( s=${1}%60 ))
    printf "%02d:%02d:%02d\n" $h $m $s
}

stty start undef
stty stop undef

export EDITOR=vim
export VISUAL=vim
source ~/.alias

